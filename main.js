/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

/*
  Privacy Glasses plugin for Obsidian
  Copyright 2021 Jill Alberts
  Licensed under the MIT License (http://opensource.org/licenses/MIT)
*/
var Level;
(function (Level) {
    Level["HideAll"] = "hide-all";
    Level["HidePrivate"] = "hide-private";
    Level["RevealAll"] = "reveal-all";
    Level["RevealHeadlines"] = "reveal-headlines";
})(Level || (Level = {}));
var CssClass;
(function (CssClass) {
    CssClass["BlurAll"] = "privacy-glasses-blur-all";
    CssClass["RevealOnHover"] = "privacy-glasses-reveal-on-hover";
    CssClass["RevealAll"] = "privacy-glasses-reveal-all";
    CssClass["RevealUnderCaret"] = "privacy-glasses-reveal-under-caret";
    CssClass["RevealHeadlines"] = "privacy-glasses-reveal-headlines";
    CssClass["Reveal"] = "privacy-glasses-reveal";
    CssClass["IsMdView"] = "is-md-view";
    CssClass["IsNonMdView"] = "is-non-md-view";
    CssClass["IsMdViewHeadlinesOnly"] = "is-md-view-headlines-only";
    CssClass["PrivacyGlassesReveal"] = "privacy-glasses-reveal";
})(CssClass || (CssClass = {}));
class PrivacyGlassesPlugin extends obsidian.Plugin {
    constructor(app, manifest) {
        super(app, manifest);
        this.privacyGlasses = false;
        this.currentLevel = Level.HidePrivate;
        this.revealed = [];
    }
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            this.statusBar = this.addStatusBarItem();
            yield this.loadSettings();
            this.addSettingTab(new privacyGlassesSettingTab(this.app, this));
            obsidian.addIcon("eye", eyeIcon);
            obsidian.addIcon("eye-closed", eyeClosedIcon);
            obsidian.addIcon("eye-slash", eyeSlashIcon);
            obsidian.addIcon("eye-glasses", eyeGlasses);
            this.addRibbonIcon("eye-closed", "Hide all", () => {
                this.currentLevel = Level.HideAll;
                this.updateLeavesAndGlobalReveals();
            });
            this.addRibbonIcon("eye-slash", "Reveal non-private", () => {
                this.currentLevel = Level.HidePrivate;
                this.updateLeavesAndGlobalReveals();
            });
            this.addRibbonIcon("eye-glasses", "Reveal headlines only", () => {
                this.currentLevel = Level.RevealHeadlines;
                this.updateLeavesAndGlobalReveals();
            });
            this.addRibbonIcon("eye", "Reveal all", () => {
                this.currentLevel = Level.RevealAll;
                this.updateLeavesAndGlobalReveals();
            });
            this.addCommand({
                id: "privacy-glasses-hide-all",
                name: "Privacy Glasses - hide all",
                callback: () => {
                    this.currentLevel = Level.HideAll;
                    this.updateLeavesAndGlobalReveals();
                },
            });
            this.addCommand({
                id: "privacy-glasses-hide-private",
                name: "Privacy Glasses - hide files in folders marked as private",
                callback: () => {
                    this.currentLevel = Level.HidePrivate;
                    this.updateLeavesAndGlobalReveals();
                },
            });
            this.addCommand({
                id: "privacy-glasses-reveal-headlines",
                name: "Privacy Glasses - reveal headlines only, keeping body content hidden",
                callback: () => {
                    this.currentLevel = Level.RevealHeadlines;
                    this.updateLeavesAndGlobalReveals();
                },
            });
            this.addCommand({
                id: "privacy-glasses-reveal-all",
                name: "Privacy Glasses - do not hide anything",
                callback: () => {
                    this.currentLevel = Level.RevealAll;
                    this.updateLeavesAndGlobalReveals();
                },
            });
            // this.addCommand({
            //   id: 'toggle-privacy-glasses', 
            //   name: 'Toggle Privacy Glasses',
            //   callback: () => {
            //     this.toggleGlasses();
            //   }
            // });
            this.registerInterval(window.setInterval(() => {
                this.checkIdleTimeout();
            }, 1000));
            this.app.workspace.onLayoutReady(() => {
                this.registerDomActivityEvents(this.app.workspace.rootSplit.win);
                this.currentLevel = this.settings.blurOnStartup;
                this.updateLeavesAndGlobalReveals();
                this.updatePrivateDirsEl(this.app.workspace.rootSplit.win.document);
                this.ensureLeavesHooked();
            });
            this.registerEvent(this.app.workspace.on("window-open", (win) => {
                this.registerDomActivityEvents(win.win);
            }));
            this.registerEvent(this.app.workspace.on("active-leaf-change", (e) => {
                this.ensureLeavesHooked();
                this.updateLeafViewStyle(e.view);
            }));
            this.lastEventTime = performance.now();
        });
    }
    // we hook into setState function of the view, because it is synchronously called
    // before the content switch. this is to prevent private content from being accidentally briefly revealed
    onBeforeViewStateChange(l) {
        this.revealed.forEach((r) => {
            r.removeClass(CssClass.Reveal);
        });
    }
    onAfterViewStateChange(l) {
        // some panels update using the same event, so it is important to update leaves after they are ready
        setTimeout(() => {
            this.updateLeavesStyle();
        }, 200);
        this.ensureLeavesHooked();
    }
    ensureLeavesHooked() {
        this.app.workspace.iterateAllLeaves((e) => {
            if (isHooked(e.view)) {
                return;
            }
            hookViewStateChanged(e.view, () => {
                this.onBeforeViewStateChange(e);
            }, () => {
                this.onAfterViewStateChange(e);
            });
        });
    }
    registerDomActivityEvents(win) {
        this.registerDomEvent(win, "mousedown", (e) => {
            this.lastEventTime = e.timeStamp;
        });
        this.registerDomEvent(win, "keydown", (e) => {
            this.lastEventTime = e.timeStamp;
        });
        this.addBlurLevelEl(win.document);
    }
    checkIdleTimeout() {
        if (this.settings.blurOnIdleTimeoutSeconds < 0) {
            return;
        }
        if (this.currentLevel === Level.HideAll) {
            return;
        }
        if (!this.lastEventTime) {
            return;
        }
        const now = performance.now();
        if ((now - this.lastEventTime) / 1000 >=
            this.settings.blurOnIdleTimeoutSeconds) {
            this.currentLevel = Level.HideAll;
            this.updateLeavesAndGlobalReveals();
        }
    }
    onunload() {
        return __awaiter(this, void 0, void 0, function* () {
            this.statusBar.remove();
            yield this.saveSettings();
        });
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign(DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
    shouldRevealLeaf(view) {
        var _b, _c;
        var _a;
        if (this.currentLevel === Level.RevealAll) {
            return true;
        }
        if (this.currentLevel === Level.HideAll ||
            this.currentLevel === Level.RevealHeadlines) {
            return false;
        }
        if (!isMarkdownFileInfoView(view)) {
            return true;
        }
        if (!("editor" in view) || !("file" in view))
            return false;
        if (view.editor &&
            this.settings.privateNoteMarker &&
            this.settings.privateNoteMarker !== "") {
            let tags = [];
            // Get tags in the note body, if any
            if ('tags' in this.app.metadataCache.getFileCache(view.file)) {
                tags.push(...this.app.metadataCache.getFileCache(view.file).tags.filter(x => !!x.tag).map(x => x.tag));
            }
            // Get tags in properties, if any
            if ('tags' in ((_a = this.app.metadataCache.getFileCache(view.file)) === null || _a === void 0 ? void 0 : _a.frontmatter)) {
                tags.push(...this.app.metadataCache.getFileCache(view.file).frontmatter.tags.filter((x) => !!x));
            }
            if (tags && tags.length > 0) {
                return !tags.includes(this.settings.privateNoteMarker);
            }
        }
        if (view.file &&
            !this.settings.privateDirs.contains((_c = (_b = view.file) === null || _b === void 0 ? void 0 : _b.parent) === null || _c === void 0 ? void 0 : _c.path)) {
            return true;
        }
        return false;
    }
    updateLeafViewStyle(view) {
        const isMd = isMarkdownFileInfoView(view) && (view === null || view === void 0 ? void 0 : view.editor);
        view.containerEl.removeClass(CssClass.IsMdView, CssClass.IsNonMdView, CssClass.IsMdViewHeadlinesOnly);
        if (isMd && this.currentLevel === Level.RevealHeadlines) {
            view.containerEl.addClass(CssClass.IsMdViewHeadlinesOnly);
        }
        else if (isMd) {
            view.containerEl.addClass(CssClass.IsMdView);
        }
        else {
            view.containerEl.addClass(CssClass.IsNonMdView);
        }
        const shouldReveal = this.shouldRevealLeaf(view);
        if (shouldReveal) {
            view.containerEl.addClass(CssClass.PrivacyGlassesReveal);
            this.revealed.push(view.containerEl);
        }
        else {
            view.containerEl.removeClass(CssClass.PrivacyGlassesReveal);
        }
    }
    updateLeavesAndGlobalReveals() {
        this.updateLeavesStyle();
        this.updateGlobalRevealStyle();
    }
    updateLeavesStyle() {
        this.app.workspace.iterateAllLeaves((leaf) => {
            this.updateLeafViewStyle(leaf.view);
        });
    }
    updateGlobalRevealStyle() {
        this.removeAllClasses();
        this.setClassToDocumentBody(this.currentLevel);
        if (this.settings.hoverToReveal) {
            document.body.classList.add(CssClass.RevealOnHover);
        }
        if (this.settings.revealUnderCaret) {
            document.body.classList.add(CssClass.RevealUnderCaret);
        }
    }
    removeAllClasses() {
        document.body.removeClass(CssClass.BlurAll, CssClass.RevealOnHover, CssClass.RevealAll, CssClass.RevealUnderCaret, CssClass.RevealHeadlines);
    }
    setClassToDocumentBody(currentLevel) {
        switch (currentLevel) {
            case Level.HideAll:
                document.body.classList.add(CssClass.BlurAll);
                break;
            case Level.RevealAll:
                document.body.classList.add(CssClass.RevealAll);
                break;
            case Level.RevealHeadlines:
                document.body.classList.add(CssClass.RevealHeadlines);
                break;
        }
    }
    addBlurLevelEl(doc) {
        this.blurLevelStyleEl = doc.createElement("style");
        this.blurLevelStyleEl.id = "privacyGlassesBlurLevel";
        doc.head.appendChild(this.blurLevelStyleEl);
        this.updateBlurLevelEl();
    }
    updateBlurLevelEl() {
        if (!this.blurLevelStyleEl) {
            return;
        }
        this.blurLevelStyleEl.textContent = `body {--blurLevel:${this.settings.blurLevel}em};`;
    }
    updatePrivateDirsEl(doc) {
        if (doc && !this.privateDirsStyleEl) {
            this.privateDirsStyleEl = doc.createElement("style");
            this.privateDirsStyleEl.id = "privacyGlassesDirBlur";
            doc.head.appendChild(this.privateDirsStyleEl);
        }
        const dirs = this.settings.privateDirs.split(",");
        this.privateDirsStyleEl.textContent = dirs
            .map((d) => `

          :is(.nav-folder-title, .nav-file-title)[data-path^=${d}] {filter: blur(calc(var(--blurLevel) * 1))}

          :is(.nav-folder-title, .nav-file-title)[data-path^=${d}]:hover {filter: unset}

          .privacy-glasses-reveal-all :is(.nav-folder-title, .nav-file-title)[data-path^=${d}] {filter: unset}

          `)
            .join("");
    }
}
const DEFAULT_SETTINGS = {
    blurOnStartup: Level.HidePrivate,
    blurLevel: 0.3,
    blurOnIdleTimeoutSeconds: -1,
    hoverToReveal: true,
    revealUnderCaret: false,
    privateDirs: "",
    privateNoteMarker: "#private",
};
class privacyGlassesSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        containerEl.createEl('h3', {
            text: 'Privacy Glasses v' + this.plugin.manifest.version
        });
        containerEl.createEl('a', {
            text: 'https://github.com/jillalberts/privacy-glasses',
            href: "https://github.com/jillalberts/privacy-glasses",
        });
        containerEl.createEl('span', {
            text: ': documentation, report issues, contact info'
        });
        containerEl.createEl('p', {
            text: 'To activate/deactivate Privacy Glasses, click the glasses icon on the left-hand ribbon or run the "Toggle Privacy Glasses" command in the Command Palette (Ctrl-P). The command can also be bound to a keyboard shortcut if you wish.'
        });
        new obsidian.Setting(containerEl)
            .setName("Activate Privacy Glasses on startup")
            .setDesc("Indicates whether the plugin is automatically activated when starting Obsidian.")
            .addDropdown((toggle) => {
            toggle.addOptions({
                "hide-all": "Hide all",
                "hide-private": "Hide private (default)",
                "reveal-all": "Reveal all",
                "reveal-headlines": "Reveal headlines only"
            });
            toggle.setValue(this.plugin.settings.blurOnStartup);
            toggle.onChange((value) => function () {
                return __awaiter(this, void 0, void 0, function* () {
                    this.plugin.settings.blurOnStartup = value;
                    yield this.plugin.saveSettings();
                });
            });
        });
        var sliderEl = new obsidian.Setting(containerEl);
        let sliderElDesc = 'Higher is blurrier. Default=60, current=';
        sliderEl
            .setName('Blur Level (only affects elements for which "Blurry Text" is selected below)')
            .setDesc(sliderElDesc + Math.round(this.plugin.settings.blurLevel * 100))
            // ^ need rounding to not show values like '55.00000000000001'
            .addSlider(slider => slider
            .setLimits(0.1, 1.5, 0.05)
            .setValue(this.plugin.settings.blurLevel)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.blurLevel = value;
            sliderEl.setDesc(sliderElDesc + Math.round(this.plugin.settings.blurLevel * 100));
            yield this.plugin.app.workspace.activeEditor.editor.refresh();
            // await this.plugin.refresh(true);
        })));
        new obsidian.Setting(containerEl)
            .setName('Obfuscation method for Edit Mode')
            .setDesc('How to obfuscate the document\'s text in Edit Mode')
            .addText((text) => text
            .setPlaceholder("finance,therapy")
            .setValue(this.plugin.settings.privateDirs)
            .onChange((value) => function () {
            return __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.privateDirs = value;
                yield this.plugin.saveSettings();
                this.plugin.updateLeavesAndGlobalReveals();
                this.plugin.updatePrivateDirsEl();
            });
        }));
        // .addDropdown(dropdown => dropdown
        //   .addOption('','[Off]')
        //   .addOption('blurEdit','Blurry Text')
        //   .addOption('blockEdit','Solid Blocks')
        //   .addOption('circlesEdit','Circles ⚠️')
        //   .setValue(this.plugin.settings.editBlurMethod)
        // .onChange(async (value) => {
        //   this.plugin.settings.editBlurMethod = value;
        //   await this.plugin.refresh(true);
        // }));
        new obsidian.Setting(containerEl)
            .setName('Obfuscation method for Preview Mode')
            .setDesc('How to obfuscate the document\'s text in Preview Mode')
            .addText((text) => text
            .setPlaceholder("#private")
            .setValue(this.plugin.settings.privateNoteMarker)
            .onChange((value) => function () {
            return __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.privateNoteMarker = value;
                yield this.plugin.saveSettings();
                this.plugin.updateLeavesStyle();
            });
        }));
    }
}
// https://icon-sets.iconify.design/ph/eye-slash/
const eyeSlashIcon = `<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path fill="currentColor" d="M53.9 34.6a8 8 0 0 0-11.8 10.8l19.2 21.1C25 88.8 9.4 123.2 8.7 124.8a8.2 8.2 0 0 0 0 6.5c.3.7 8.8 19.5 27.6 38.4c25.1 25 56.8 38.3 91.7 38.3a128.6 128.6 0 0 0 52.1-10.8l22 24.2a8 8 0 0 0 5.9 2.6a8.2 8.2 0 0 0 5.4-2.1a7.9 7.9 0 0 0 .5-11.3Zm47.3 75.9l41.7 45.8A31.6 31.6 0 0 1 128 160a32 32 0 0 1-26.8-49.5ZM128 192c-30.8 0-57.7-11.2-79.9-33.3A128.3 128.3 0 0 1 25 128c4.7-8.8 19.8-33.5 47.3-49.4l18 19.8a48 48 0 0 0 63.6 70l14.7 16.2A112.1 112.1 0 0 1 128 192Zm119.3-60.7c-.4.9-10.5 23.3-33.4 43.8a8.1 8.1 0 0 1-5.3 2a7.6 7.6 0 0 1-5.9-2.7a8 8 0 0 1 .6-11.3A131 131 0 0 0 231 128a130.3 130.3 0 0 0-23.1-30.8C185.7 75.2 158.8 64 128 64a112.9 112.9 0 0 0-19.4 1.6a8.1 8.1 0 0 1-9.2-6.6a8 8 0 0 1 6.6-9.2a132.4 132.4 0 0 1 22-1.8c34.9 0 66.6 13.3 91.7 38.3c18.8 18.9 27.3 37.7 27.6 38.5a8.2 8.2 0 0 1 0 6.5ZM134 96.6a8 8 0 0 1 3-15.8a48.3 48.3 0 0 1 38.8 42.7a8 8 0 0 1-7.2 8.7h-.8a7.9 7.9 0 0 1-7.9-7.2A32.2 32.2 0 0 0 134 96.6Z"/></svg>`;
// https://icon-sets.iconify.design/ph/eye-closed-bold/
const eyeClosedIcon = `<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path fill="currentColor" d="M234.4 160.8a12 12 0 0 1-10.4 18a11.8 11.8 0 0 1-10.4-6l-16.3-28.2a126 126 0 0 1-29.4 13.5l5.2 29.4a11.9 11.9 0 0 1-9.7 13.9l-2.1.2a12 12 0 0 1-11.8-9.9l-5.1-28.7a123.5 123.5 0 0 1-16.4 1a146.3 146.3 0 0 1-16.5-1l-5.1 28.7a12 12 0 0 1-11.8 9.9l-2.1-.2a11.9 11.9 0 0 1-9.7-13.9l5.2-29.4a125.3 125.3 0 0 1-29.3-13.5L42.3 173a12.1 12.1 0 0 1-10.4 6a11.7 11.7 0 0 1-6-1.6a12 12 0 0 1-4.4-16.4l17.9-31a142.4 142.4 0 0 1-16.7-17.6a12 12 0 1 1 18.6-15.1C57.1 116.8 84.9 140 128 140s70.9-23.2 86.7-42.7a12 12 0 1 1 18.6 15.1a150.3 150.3 0 0 1-16.7 17.7Z"/></svg>`;
// https://icon-sets.iconify.design/ph/eye/
const eyeIcon = `<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path fill="currentColor" d="M247.3 124.8c-.3-.8-8.8-19.6-27.6-38.5C194.6 61.3 162.9 48 128 48S61.4 61.3 36.3 86.3C17.5 105.2 9 124 8.7 124.8a7.9 7.9 0 0 0 0 6.4c.3.8 8.8 19.6 27.6 38.5c25.1 25 56.8 38.3 91.7 38.3s66.6-13.3 91.7-38.3c18.8-18.9 27.3-37.7 27.6-38.5a7.9 7.9 0 0 0 0-6.4ZM128 192c-30.8 0-57.7-11.2-79.9-33.3A130.3 130.3 0 0 1 25 128a130.3 130.3 0 0 1 23.1-30.8C70.3 75.2 97.2 64 128 64s57.7 11.2 79.9 33.2A130.3 130.3 0 0 1 231 128c-7.2 13.5-38.6 64-103 64Zm0-112a48 48 0 1 0 48 48a48 48 0 0 0-48-48Zm0 80a32 32 0 1 1 32-32a32.1 32.1 0 0 1-32 32Z"/></svg>`;
// https://icon-sets.iconify.design/ph/eyeglasses/
const eyeGlasses = `<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path fill="currentColor" d="M200 40a8 8 0 0 0 0 16a16 16 0 0 1 16 16v58.08A44 44 0 0 0 145.68 152h-35.36A44 44 0 0 0 40 130.08V72a16 16 0 0 1 16-16a8 8 0 0 0 0-16a32 32 0 0 0-32 32v92a44 44 0 0 0 87.81 4h32.38a44 44 0 0 0 87.81-4V72a32 32 0 0 0-32-32ZM68 192a28 28 0 1 1 28-28a28 28 0 0 1-28 28Zm120 0a28 28 0 1 1 28-28a28 28 0 0 1-28 28Z"/></svg>`;
function isMarkdownFileInfoView(x) {
    const anyX = x;
    return !!Object.getOwnPropertyDescriptor(anyX, "file");
}
function isHooked(view) {
    const anyView = view;
    const ownProps = Object.getOwnPropertyNames(anyView);
    return (ownProps.contains("setState") && typeof anyView.setState === "function");
}
function hookViewStateChanged(view, onBeforeStateChange, onAfterStateChange) {
    const anyView = view;
    const setState = anyView === null || anyView === void 0 ? void 0 : anyView.setState;
    function wrapper() {
        onBeforeStateChange(view);
        const r = setState.apply(this, arguments);
        if (typeof r.then === "function") {
            r.then(() => {
                onAfterStateChange(view);
            });
        }
        else {
            onAfterStateChange(view);
        }
        return r;
    }
    anyView.setState = wrapper.bind(view);
    return anyView;
}

module.exports = PrivacyGlassesPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzLy5wbnBtL0Byb2xsdXArcGx1Z2luLXR5cGVzY3JpcHRANi4xLjBfcm9sbHVwQDIuNzkuMl90c2xpYkAyLjguMV90eXBlc2NyaXB0QDQuOS41L25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCJtYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSwgU3VwcHJlc3NlZEVycm9yLCBTeW1ib2wsIEl0ZXJhdG9yICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2VzRGVjb3JhdGUoY3RvciwgZGVzY3JpcHRvckluLCBkZWNvcmF0b3JzLCBjb250ZXh0SW4sIGluaXRpYWxpemVycywgZXh0cmFJbml0aWFsaXplcnMpIHtcclxuICAgIGZ1bmN0aW9uIGFjY2VwdChmKSB7IGlmIChmICE9PSB2b2lkIDAgJiYgdHlwZW9mIGYgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uIGV4cGVjdGVkXCIpOyByZXR1cm4gZjsgfVxyXG4gICAgdmFyIGtpbmQgPSBjb250ZXh0SW4ua2luZCwga2V5ID0ga2luZCA9PT0gXCJnZXR0ZXJcIiA/IFwiZ2V0XCIgOiBraW5kID09PSBcInNldHRlclwiID8gXCJzZXRcIiA6IFwidmFsdWVcIjtcclxuICAgIHZhciB0YXJnZXQgPSAhZGVzY3JpcHRvckluICYmIGN0b3IgPyBjb250ZXh0SW5bXCJzdGF0aWNcIl0gPyBjdG9yIDogY3Rvci5wcm90b3R5cGUgOiBudWxsO1xyXG4gICAgdmFyIGRlc2NyaXB0b3IgPSBkZXNjcmlwdG9ySW4gfHwgKHRhcmdldCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBjb250ZXh0SW4ubmFtZSkgOiB7fSk7XHJcbiAgICB2YXIgXywgZG9uZSA9IGZhbHNlO1xyXG4gICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluKSBjb250ZXh0W3BdID0gcCA9PT0gXCJhY2Nlc3NcIiA/IHt9IDogY29udGV4dEluW3BdO1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluLmFjY2VzcykgY29udGV4dC5hY2Nlc3NbcF0gPSBjb250ZXh0SW4uYWNjZXNzW3BdO1xyXG4gICAgICAgIGNvbnRleHQuYWRkSW5pdGlhbGl6ZXIgPSBmdW5jdGlvbiAoZikgeyBpZiAoZG9uZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgaW5pdGlhbGl6ZXJzIGFmdGVyIGRlY29yYXRpb24gaGFzIGNvbXBsZXRlZFwiKTsgZXh0cmFJbml0aWFsaXplcnMucHVzaChhY2NlcHQoZiB8fCBudWxsKSk7IH07XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9ICgwLCBkZWNvcmF0b3JzW2ldKShraW5kID09PSBcImFjY2Vzc29yXCIgPyB7IGdldDogZGVzY3JpcHRvci5nZXQsIHNldDogZGVzY3JpcHRvci5zZXQgfSA6IGRlc2NyaXB0b3Jba2V5XSwgY29udGV4dCk7XHJcbiAgICAgICAgaWYgKGtpbmQgPT09IFwiYWNjZXNzb3JcIikge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHR5cGVvZiByZXN1bHQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5nZXQpKSBkZXNjcmlwdG9yLmdldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5zZXQpKSBkZXNjcmlwdG9yLnNldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5pbml0KSkgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKF8gPSBhY2NlcHQocmVzdWx0KSkge1xyXG4gICAgICAgICAgICBpZiAoa2luZCA9PT0gXCJmaWVsZFwiKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcclxuICAgICAgICAgICAgZWxzZSBkZXNjcmlwdG9yW2tleV0gPSBfO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0YXJnZXQpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGNvbnRleHRJbi5uYW1lLCBkZXNjcmlwdG9yKTtcclxuICAgIGRvbmUgPSB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcnVuSW5pdGlhbGl6ZXJzKHRoaXNBcmcsIGluaXRpYWxpemVycywgdmFsdWUpIHtcclxuICAgIHZhciB1c2VWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0aWFsaXplcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YWx1ZSA9IHVzZVZhbHVlID8gaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZywgdmFsdWUpIDogaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXNlVmFsdWUgPyB2YWx1ZSA6IHZvaWQgMDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Byb3BLZXkoeCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB4ID09PSBcInN5bWJvbFwiID8geCA6IFwiXCIuY29uY2F0KHgpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc2V0RnVuY3Rpb25OYW1lKGYsIG5hbWUsIHByZWZpeCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN5bWJvbFwiKSBuYW1lID0gbmFtZS5kZXNjcmlwdGlvbiA/IFwiW1wiLmNvbmNhdChuYW1lLmRlc2NyaXB0aW9uLCBcIl1cIikgOiBcIlwiO1xyXG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgsIFwiIFwiLCBuYW1lKSA6IG5hbWUgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEl0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKTtcclxuICAgIHJldHVybiBnLm5leHQgPSB2ZXJiKDApLCBnW1widGhyb3dcIl0gPSB2ZXJiKDEpLCBnW1wicmV0dXJuXCJdID0gdmVyYigyKSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xyXG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcclxuICAgICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgQXN5bmNJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gQXN5bmNJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiLCBhd2FpdFJldHVybiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIGF3YWl0UmV0dXJuKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodikudGhlbihmLCByZWplY3QpOyB9OyB9XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaWYgKGdbbl0pIHsgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgaWYgKGYpIGlbbl0gPSBmKGlbbl0pOyB9IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBmYWxzZSB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG52YXIgb3duS2V5cyA9IGZ1bmN0aW9uKG8pIHtcclxuICAgIG93bktleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiAobykge1xyXG4gICAgICAgIHZhciBhciA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGsgaW4gbykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBrKSkgYXJbYXIubGVuZ3RoXSA9IGs7XHJcbiAgICAgICAgcmV0dXJuIGFyO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBvd25LZXlzKG8pO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgPSBvd25LZXlzKG1vZCksIGkgPSAwOyBpIDwgay5sZW5ndGg7IGkrKykgaWYgKGtbaV0gIT09IFwiZGVmYXVsdFwiKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGtbaV0pO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEluKHN0YXRlLCByZWNlaXZlcikge1xyXG4gICAgaWYgKHJlY2VpdmVyID09PSBudWxsIHx8ICh0eXBlb2YgcmVjZWl2ZXIgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJlY2VpdmVyICE9PSBcImZ1bmN0aW9uXCIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHVzZSAnaW4nIG9wZXJhdG9yIG9uIG5vbi1vYmplY3RcIik7XHJcbiAgICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52LCB2YWx1ZSwgYXN5bmMpIHtcclxuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZC5cIik7XHJcbiAgICAgICAgdmFyIGRpc3Bvc2UsIGlubmVyO1xyXG4gICAgICAgIGlmIChhc3luYykge1xyXG4gICAgICAgICAgICBpZiAoIVN5bWJvbC5hc3luY0Rpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgICAgICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5hc3luY0Rpc3Bvc2VdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGlzcG9zZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIGlmICghU3ltYm9sLmRpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuZGlzcG9zZSBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICAgICAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuZGlzcG9zZV07XHJcbiAgICAgICAgICAgIGlmIChhc3luYykgaW5uZXIgPSBkaXNwb3NlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIGRpc3Bvc2UgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBub3QgZGlzcG9zYWJsZS5cIik7XHJcbiAgICAgICAgaWYgKGlubmVyKSBkaXNwb3NlID0gZnVuY3Rpb24oKSB7IHRyeSB7IGlubmVyLmNhbGwodGhpcyk7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpOyB9IH07XHJcbiAgICAgICAgZW52LnN0YWNrLnB1c2goeyB2YWx1ZTogdmFsdWUsIGRpc3Bvc2U6IGRpc3Bvc2UsIGFzeW5jOiBhc3luYyB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFzeW5jKSB7XHJcbiAgICAgICAgZW52LnN0YWNrLnB1c2goeyBhc3luYzogdHJ1ZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZTtcclxuXHJcbn1cclxuXHJcbnZhciBfU3VwcHJlc3NlZEVycm9yID0gdHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XHJcbiAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kaXNwb3NlUmVzb3VyY2VzKGVudikge1xyXG4gICAgZnVuY3Rpb24gZmFpbChlKSB7XHJcbiAgICAgICAgZW52LmVycm9yID0gZW52Lmhhc0Vycm9yID8gbmV3IF9TdXBwcmVzc2VkRXJyb3IoZSwgZW52LmVycm9yLCBcIkFuIGVycm9yIHdhcyBzdXBwcmVzc2VkIGR1cmluZyBkaXNwb3NhbC5cIikgOiBlO1xyXG4gICAgICAgIGVudi5oYXNFcnJvciA9IHRydWU7XHJcbiAgICB9XHJcbiAgICB2YXIgciwgcyA9IDA7XHJcbiAgICBmdW5jdGlvbiBuZXh0KCkge1xyXG4gICAgICAgIHdoaWxlIChyID0gZW52LnN0YWNrLnBvcCgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXIuYXN5bmMgJiYgcyA9PT0gMSkgcmV0dXJuIHMgPSAwLCBlbnYuc3RhY2sucHVzaChyKSwgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihuZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChyLmRpc3Bvc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gci5kaXNwb3NlLmNhbGwoci52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIuYXN5bmMpIHJldHVybiBzIHw9IDIsIFByb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4obmV4dCwgZnVuY3Rpb24oZSkgeyBmYWlsKGUpOyByZXR1cm4gbmV4dCgpOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgcyB8PSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBmYWlsKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzID09PSAxKSByZXR1cm4gZW52Lmhhc0Vycm9yID8gUHJvbWlzZS5yZWplY3QoZW52LmVycm9yKSA6IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIGlmIChlbnYuaGFzRXJyb3IpIHRocm93IGVudi5lcnJvcjtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXh0KCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jld3JpdGVSZWxhdGl2ZUltcG9ydEV4dGVuc2lvbihwYXRoLCBwcmVzZXJ2ZUpzeCkge1xyXG4gICAgaWYgKHR5cGVvZiBwYXRoID09PSBcInN0cmluZ1wiICYmIC9eXFwuXFwuP1xcLy8udGVzdChwYXRoKSkge1xyXG4gICAgICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcLih0c3gpJHwoKD86XFwuZCk/KSgoPzpcXC5bXi4vXSs/KT8pXFwuKFtjbV0/KXRzJC9pLCBmdW5jdGlvbiAobSwgdHN4LCBkLCBleHQsIGNtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c3ggPyBwcmVzZXJ2ZUpzeCA/IFwiLmpzeFwiIDogXCIuanNcIiA6IGQgJiYgKCFleHQgfHwgIWNtKSA/IG0gOiAoZCArIGV4dCArIFwiLlwiICsgY20udG9Mb3dlckNhc2UoKSArIFwianNcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGF0aDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgX19leHRlbmRzOiBfX2V4dGVuZHMsXHJcbiAgICBfX2Fzc2lnbjogX19hc3NpZ24sXHJcbiAgICBfX3Jlc3Q6IF9fcmVzdCxcclxuICAgIF9fZGVjb3JhdGU6IF9fZGVjb3JhdGUsXHJcbiAgICBfX3BhcmFtOiBfX3BhcmFtLFxyXG4gICAgX19lc0RlY29yYXRlOiBfX2VzRGVjb3JhdGUsXHJcbiAgICBfX3J1bkluaXRpYWxpemVyczogX19ydW5Jbml0aWFsaXplcnMsXHJcbiAgICBfX3Byb3BLZXk6IF9fcHJvcEtleSxcclxuICAgIF9fc2V0RnVuY3Rpb25OYW1lOiBfX3NldEZ1bmN0aW9uTmFtZSxcclxuICAgIF9fbWV0YWRhdGE6IF9fbWV0YWRhdGEsXHJcbiAgICBfX2F3YWl0ZXI6IF9fYXdhaXRlcixcclxuICAgIF9fZ2VuZXJhdG9yOiBfX2dlbmVyYXRvcixcclxuICAgIF9fY3JlYXRlQmluZGluZzogX19jcmVhdGVCaW5kaW5nLFxyXG4gICAgX19leHBvcnRTdGFyOiBfX2V4cG9ydFN0YXIsXHJcbiAgICBfX3ZhbHVlczogX192YWx1ZXMsXHJcbiAgICBfX3JlYWQ6IF9fcmVhZCxcclxuICAgIF9fc3ByZWFkOiBfX3NwcmVhZCxcclxuICAgIF9fc3ByZWFkQXJyYXlzOiBfX3NwcmVhZEFycmF5cyxcclxuICAgIF9fc3ByZWFkQXJyYXk6IF9fc3ByZWFkQXJyYXksXHJcbiAgICBfX2F3YWl0OiBfX2F3YWl0LFxyXG4gICAgX19hc3luY0dlbmVyYXRvcjogX19hc3luY0dlbmVyYXRvcixcclxuICAgIF9fYXN5bmNEZWxlZ2F0b3I6IF9fYXN5bmNEZWxlZ2F0b3IsXHJcbiAgICBfX2FzeW5jVmFsdWVzOiBfX2FzeW5jVmFsdWVzLFxyXG4gICAgX19tYWtlVGVtcGxhdGVPYmplY3Q6IF9fbWFrZVRlbXBsYXRlT2JqZWN0LFxyXG4gICAgX19pbXBvcnRTdGFyOiBfX2ltcG9ydFN0YXIsXHJcbiAgICBfX2ltcG9ydERlZmF1bHQ6IF9faW1wb3J0RGVmYXVsdCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0OiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEluOiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4sXHJcbiAgICBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZTogX19hZGREaXNwb3NhYmxlUmVzb3VyY2UsXHJcbiAgICBfX2Rpc3Bvc2VSZXNvdXJjZXM6IF9fZGlzcG9zZVJlc291cmNlcyxcclxuICAgIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uOiBfX3Jld3JpdGVSZWxhdGl2ZUltcG9ydEV4dGVuc2lvbixcclxufTtcclxuIiwiLyogXHRcclxuICBQcml2YWN5IEdsYXNzZXMgcGx1Z2luIGZvciBPYnNpZGlhblxyXG4gIENvcHlyaWdodCAyMDIxIEppbGwgQWxiZXJ0c1xyXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVCkgXHJcbiovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgYWRkSWNvbiwgVG9nZ2xlQ29tcG9uZW50LCBOb3RpY2UsIFBsdWdpbk1hbmlmZXN0LCBXb3Jrc3BhY2VMZWFmLCBWaWV3LCBNYXJrZG93blZpZXcsIFRGaWxlLCBGaWxlVmlld30gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZW51bSBMZXZlbCB7XHJcbiAgXCJIaWRlQWxsXCIgPSBcImhpZGUtYWxsXCIsXHJcbiAgXCJIaWRlUHJpdmF0ZVwiID0gXCJoaWRlLXByaXZhdGVcIixcclxuICBcIlJldmVhbEFsbFwiID0gXCJyZXZlYWwtYWxsXCIsXHJcbiAgXCJSZXZlYWxIZWFkbGluZXNcIiA9IFwicmV2ZWFsLWhlYWRsaW5lc1wiLFxyXG59XHJcblxyXG5lbnVtIENzc0NsYXNzIHtcclxuICBcIkJsdXJBbGxcIiA9IFwicHJpdmFjeS1nbGFzc2VzLWJsdXItYWxsXCIsXHJcbiAgXCJSZXZlYWxPbkhvdmVyXCIgPSBcInByaXZhY3ktZ2xhc3Nlcy1yZXZlYWwtb24taG92ZXJcIixcclxuICBcIlJldmVhbEFsbFwiID0gXCJwcml2YWN5LWdsYXNzZXMtcmV2ZWFsLWFsbFwiLFxyXG4gIFwiUmV2ZWFsVW5kZXJDYXJldFwiID0gXCJwcml2YWN5LWdsYXNzZXMtcmV2ZWFsLXVuZGVyLWNhcmV0XCIsXHJcbiAgXCJSZXZlYWxIZWFkbGluZXNcIiA9IFwicHJpdmFjeS1nbGFzc2VzLXJldmVhbC1oZWFkbGluZXNcIixcclxuICBcIlJldmVhbFwiID0gXCJwcml2YWN5LWdsYXNzZXMtcmV2ZWFsXCIsXHJcbiAgXCJJc01kVmlld1wiID0gXCJpcy1tZC12aWV3XCIsXHJcbiAgXCJJc05vbk1kVmlld1wiID0gXCJpcy1ub24tbWQtdmlld1wiLFxyXG4gIFwiSXNNZFZpZXdIZWFkbGluZXNPbmx5XCIgPSBcImlzLW1kLXZpZXctaGVhZGxpbmVzLW9ubHlcIixcclxuICBcIlByaXZhY3lHbGFzc2VzUmV2ZWFsXCIgPSBcInByaXZhY3ktZ2xhc3Nlcy1yZXZlYWxcIixcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJpdmFjeUdsYXNzZXNQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gIHNldHRpbmdzOiBQcml2YWN5R2xhc3Nlc1NldHRpbmdzO1xyXG4gIHN0YXR1c0JhcjogSFRNTEVsZW1lbnQ7XHJcbiAgbm90aWNlTXNnOiBOb3RpY2U7XHJcbiAgYmx1ckxldmVsU3R5bGVFbDogSFRNTEVsZW1lbnQ7XHJcbiAgcHJpdmFjeUdsYXNzZXM6IGJvb2xlYW4gPSBmYWxzZTtcclxuICByZXZlYWxlZDogSFRNTEVsZW1lbnRbXTtcclxuICBjdXJyZW50TGV2ZWw6IExldmVsID0gTGV2ZWwuSGlkZVByaXZhdGU7XHJcbiAgbGFzdEV2ZW50VGltZTogbnVtYmVyO1xyXG4gIHByaXZhdGVEaXJzU3R5bGVFbDogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBtYW5pZmVzdDogUGx1Z2luTWFuaWZlc3QpIHtcclxuICAgIHN1cGVyKGFwcCwgbWFuaWZlc3QpO1xyXG4gICAgdGhpcy5yZXZlYWxlZCA9IFtdO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgdGhpcy5zdGF0dXNCYXIgPSB0aGlzLmFkZFN0YXR1c0Jhckl0ZW0oKTtcclxuXHJcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgcHJpdmFjeUdsYXNzZXNTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG4gICAgYWRkSWNvbihcImV5ZVwiLCBleWVJY29uKTtcclxuICAgIGFkZEljb24oXCJleWUtY2xvc2VkXCIsIGV5ZUNsb3NlZEljb24pO1xyXG4gICAgYWRkSWNvbihcImV5ZS1zbGFzaFwiLCBleWVTbGFzaEljb24pO1xyXG4gICAgYWRkSWNvbihcImV5ZS1nbGFzc2VzXCIsIGV5ZUdsYXNzZXMpO1xyXG4gICAgXHJcbiAgICB0aGlzLmFkZFJpYmJvbkljb24oXCJleWUtY2xvc2VkXCIsIFwiSGlkZSBhbGxcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY3VycmVudExldmVsID0gTGV2ZWwuSGlkZUFsbDtcclxuICAgICAgICB0aGlzLnVwZGF0ZUxlYXZlc0FuZEdsb2JhbFJldmVhbHMoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuYWRkUmliYm9uSWNvbihcImV5ZS1zbGFzaFwiLCBcIlJldmVhbCBub24tcHJpdmF0ZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50TGV2ZWwgPSBMZXZlbC5IaWRlUHJpdmF0ZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUxlYXZlc0FuZEdsb2JhbFJldmVhbHMoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuYWRkUmliYm9uSWNvbihcImV5ZS1nbGFzc2VzXCIsIFwiUmV2ZWFsIGhlYWRsaW5lcyBvbmx5XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRMZXZlbCA9IExldmVsLlJldmVhbEhlYWRsaW5lcztcclxuICAgICAgICB0aGlzLnVwZGF0ZUxlYXZlc0FuZEdsb2JhbFJldmVhbHMoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuYWRkUmliYm9uSWNvbihcImV5ZVwiLCBcIlJldmVhbCBhbGxcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY3VycmVudExldmVsID0gTGV2ZWwuUmV2ZWFsQWxsO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTGVhdmVzQW5kR2xvYmFsUmV2ZWFscygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgIGlkOiBcInByaXZhY3ktZ2xhc3Nlcy1oaWRlLWFsbFwiLFxyXG4gICAgICAgIG5hbWU6IFwiUHJpdmFjeSBHbGFzc2VzIC0gaGlkZSBhbGxcIixcclxuICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5jdXJyZW50TGV2ZWwgPSBMZXZlbC5IaWRlQWxsO1xyXG4gICAgICAgICAgdGhpcy51cGRhdGVMZWF2ZXNBbmRHbG9iYWxSZXZlYWxzKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogXCJwcml2YWN5LWdsYXNzZXMtaGlkZS1wcml2YXRlXCIsXHJcbiAgICAgIG5hbWU6IFwiUHJpdmFjeSBHbGFzc2VzIC0gaGlkZSBmaWxlcyBpbiBmb2xkZXJzIG1hcmtlZCBhcyBwcml2YXRlXCIsXHJcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50TGV2ZWwgPSBMZXZlbC5IaWRlUHJpdmF0ZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUxlYXZlc0FuZEdsb2JhbFJldmVhbHMoKTtcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6IFwicHJpdmFjeS1nbGFzc2VzLXJldmVhbC1oZWFkbGluZXNcIixcclxuICAgICAgbmFtZTogXCJQcml2YWN5IEdsYXNzZXMgLSByZXZlYWwgaGVhZGxpbmVzIG9ubHksIGtlZXBpbmcgYm9keSBjb250ZW50IGhpZGRlblwiLFxyXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY3VycmVudExldmVsID0gTGV2ZWwuUmV2ZWFsSGVhZGxpbmVzO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTGVhdmVzQW5kR2xvYmFsUmV2ZWFscygpO1xyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogXCJwcml2YWN5LWdsYXNzZXMtcmV2ZWFsLWFsbFwiLFxyXG4gICAgICBuYW1lOiBcIlByaXZhY3kgR2xhc3NlcyAtIGRvIG5vdCBoaWRlIGFueXRoaW5nXCIsXHJcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50TGV2ZWwgPSBMZXZlbC5SZXZlYWxBbGw7XHJcbiAgICAgICAgdGhpcy51cGRhdGVMZWF2ZXNBbmRHbG9iYWxSZXZlYWxzKCk7XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIC8vIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAvLyAgIGlkOiAndG9nZ2xlLXByaXZhY3ktZ2xhc3NlcycsIFxyXG4gICAgLy8gICBuYW1lOiAnVG9nZ2xlIFByaXZhY3kgR2xhc3NlcycsXHJcbiAgICAvLyAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAvLyAgICAgdGhpcy50b2dnbGVHbGFzc2VzKCk7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vIH0pO1xyXG5cclxuICAgIHRoaXMucmVnaXN0ZXJJbnRlcnZhbCh3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICB0aGlzLmNoZWNrSWRsZVRpbWVvdXQoKTtcclxuICAgIH0sIDEwMDApKTtcclxuXHJcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XHJcbiAgICAgIHRoaXMucmVnaXN0ZXJEb21BY3Rpdml0eUV2ZW50cyh0aGlzLmFwcC53b3Jrc3BhY2Uucm9vdFNwbGl0Lndpbik7XHJcbiAgICAgIHRoaXMuY3VycmVudExldmVsID0gdGhpcy5zZXR0aW5ncy5ibHVyT25TdGFydHVwO1xyXG4gICAgICB0aGlzLnVwZGF0ZUxlYXZlc0FuZEdsb2JhbFJldmVhbHMoKTtcclxuICAgICAgdGhpcy51cGRhdGVQcml2YXRlRGlyc0VsKHRoaXMuYXBwLndvcmtzcGFjZS5yb290U3BsaXQud2luLmRvY3VtZW50KTtcclxuICAgICAgdGhpcy5lbnN1cmVMZWF2ZXNIb29rZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJ3aW5kb3ctb3BlblwiLCAod2luKSA9PiB7XHJcbiAgICAgIHRoaXMucmVnaXN0ZXJEb21BY3Rpdml0eUV2ZW50cyh3aW4ud2luKTtcclxuICAgIH0pKTtcclxuXHJcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKFwiYWN0aXZlLWxlYWYtY2hhbmdlXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMuZW5zdXJlTGVhdmVzSG9va2VkKCk7XHJcbiAgICAgIHRoaXMudXBkYXRlTGVhZlZpZXdTdHlsZShlLnZpZXcpO1xyXG4gICAgfSkpO1xyXG4gICAgdGhpcy5sYXN0RXZlbnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgfVxyXG5cclxuICAvLyB3ZSBob29rIGludG8gc2V0U3RhdGUgZnVuY3Rpb24gb2YgdGhlIHZpZXcsIGJlY2F1c2UgaXQgaXMgc3luY2hyb25vdXNseSBjYWxsZWRcclxuICAvLyBiZWZvcmUgdGhlIGNvbnRlbnQgc3dpdGNoLiB0aGlzIGlzIHRvIHByZXZlbnQgcHJpdmF0ZSBjb250ZW50IGZyb20gYmVpbmcgYWNjaWRlbnRhbGx5IGJyaWVmbHkgcmV2ZWFsZWRcclxuICBvbkJlZm9yZVZpZXdTdGF0ZUNoYW5nZShsOiBXb3Jrc3BhY2VMZWFmKSB7XHJcbiAgICB0aGlzLnJldmVhbGVkLmZvckVhY2goKHIpID0+IHtcclxuICAgICAgci5yZW1vdmVDbGFzcyhDc3NDbGFzcy5SZXZlYWwpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvbkFmdGVyVmlld1N0YXRlQ2hhbmdlKGw6IFdvcmtzcGFjZUxlYWYpIHtcclxuICAgIC8vIHNvbWUgcGFuZWxzIHVwZGF0ZSB1c2luZyB0aGUgc2FtZSBldmVudCwgc28gaXQgaXMgaW1wb3J0YW50IHRvIHVwZGF0ZSBsZWF2ZXMgYWZ0ZXIgdGhleSBhcmUgcmVhZHlcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLnVwZGF0ZUxlYXZlc1N0eWxlKCk7XHJcbiAgICB9LCAyMDApO1xyXG4gICAgdGhpcy5lbnN1cmVMZWF2ZXNIb29rZWQoKTtcclxuICB9XHJcblxyXG4gIGVuc3VyZUxlYXZlc0hvb2tlZCgpIHtcclxuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChlKSA9PiB7XHJcbiAgICAgIGlmIChpc0hvb2tlZChlLnZpZXcpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGhvb2tWaWV3U3RhdGVDaGFuZ2VkKGUudmlldywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMub25CZWZvcmVWaWV3U3RhdGVDaGFuZ2UoZSk7XHJcbiAgICAgIH0sICgpID0+IHtcclxuICAgICAgICB0aGlzLm9uQWZ0ZXJWaWV3U3RhdGVDaGFuZ2UoZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZWdpc3RlckRvbUFjdGl2aXR5RXZlbnRzKHdpbjogV2luZG93KSB7XHJcbiAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQod2luLCBcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLmxhc3RFdmVudFRpbWUgPSBlLnRpbWVTdGFtcDtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KHdpbiwgXCJrZXlkb3duXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMubGFzdEV2ZW50VGltZSA9IGUudGltZVN0YW1wO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmFkZEJsdXJMZXZlbEVsKHdpbi5kb2N1bWVudCk7XHJcbiAgfVxyXG5cclxuICBjaGVja0lkbGVUaW1lb3V0KCkge1xyXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuYmx1ck9uSWRsZVRpbWVvdXRTZWNvbmRzIDwgMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5jdXJyZW50TGV2ZWwgPT09IExldmVsLkhpZGVBbGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLmxhc3RFdmVudFRpbWUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICBpZiAoKG5vdyAtIHRoaXMubGFzdEV2ZW50VGltZSkgLyAxMDAwID49XHJcbiAgICAgIHRoaXMuc2V0dGluZ3MuYmx1ck9uSWRsZVRpbWVvdXRTZWNvbmRzKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudExldmVsID0gTGV2ZWwuSGlkZUFsbDtcclxuICAgICAgdGhpcy51cGRhdGVMZWF2ZXNBbmRHbG9iYWxSZXZlYWxzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBvbnVubG9hZCgpIHtcclxuICAgIHRoaXMuc3RhdHVzQmFyLnJlbW92ZSgpO1xyXG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHJcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cclxuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgfVxyXG5cclxuICBzaG91bGRSZXZlYWxMZWFmKHZpZXc6IFZpZXcpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRMZXZlbCA9PT0gTGV2ZWwuUmV2ZWFsQWxsKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmN1cnJlbnRMZXZlbCA9PT0gTGV2ZWwuSGlkZUFsbCB8fFxyXG4gICAgICB0aGlzLmN1cnJlbnRMZXZlbCA9PT0gTGV2ZWwuUmV2ZWFsSGVhZGxpbmVzKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWlzTWFya2Rvd25GaWxlSW5mb1ZpZXcodmlldykpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCEoXCJlZGl0b3JcIiBpbiB2aWV3KSB8fCAhKFwiZmlsZVwiIGluIHZpZXcpKSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAoXHJcbiAgICAgIHZpZXcuZWRpdG9yICYmXHJcbiAgICAgIHRoaXMuc2V0dGluZ3MucHJpdmF0ZU5vdGVNYXJrZXIgJiZcclxuICAgICAgdGhpcy5zZXR0aW5ncy5wcml2YXRlTm90ZU1hcmtlciAhPT0gXCJcIlxyXG4gICAgKSB7XHJcbiAgICAgIGxldCB0YWdzID0gW107XHJcbiAgICAgIC8vIEdldCB0YWdzIGluIHRoZSBub3RlIGJvZHksIGlmIGFueVxyXG4gICAgICBpZiAoJ3RhZ3MnIGluIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHZpZXcuZmlsZSBhcyBURmlsZSkpIHtcclxuICAgICAgICB0YWdzLnB1c2goLi4udGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUodmlldy5maWxlIGFzIFRGaWxlKS50YWdzLmZpbHRlcih4ID0+ICEheC50YWcpLm1hcCh4ID0+IHgudGFnKSk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gR2V0IHRhZ3MgaW4gcHJvcGVydGllcywgaWYgYW55XHJcbiAgICAgIGlmICgndGFncycgaW4gKChfYSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHZpZXcuZmlsZSBhcyBURmlsZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mcm9udG1hdHRlcikpIHtcclxuICAgICAgICB0YWdzLnB1c2goLi4udGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUodmlldy5maWxlIGFzIFRGaWxlKS5mcm9udG1hdHRlci50YWdzLmZpbHRlcigoeDogc3RyaW5nKSA9PiAhIXgpKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGFncyAmJiB0YWdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICByZXR1cm4gIXRhZ3MuaW5jbHVkZXModGhpcy5zZXR0aW5ncy5wcml2YXRlTm90ZU1hcmtlcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIHZpZXcuZmlsZSAmJlxyXG4gICAgICAhdGhpcy5zZXR0aW5ncy5wcml2YXRlRGlycy5jb250YWlucygodmlldy5maWxlIGFzIFRGaWxlKT8ucGFyZW50Py5wYXRoXHJcbiAgICApKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUxlYWZWaWV3U3R5bGUodmlldzogVmlldykge1xyXG4gICAgY29uc3QgaXNNZCA9IGlzTWFya2Rvd25GaWxlSW5mb1ZpZXcodmlldykgJiYgKHZpZXcgYXMgTWFya2Rvd25WaWV3KT8uZWRpdG9yO1xyXG4gICAgdmlldy5jb250YWluZXJFbC5yZW1vdmVDbGFzcyhDc3NDbGFzcy5Jc01kVmlldywgQ3NzQ2xhc3MuSXNOb25NZFZpZXcsIENzc0NsYXNzLklzTWRWaWV3SGVhZGxpbmVzT25seSk7XHJcbiAgICBpZiAoaXNNZCAmJiB0aGlzLmN1cnJlbnRMZXZlbCA9PT0gTGV2ZWwuUmV2ZWFsSGVhZGxpbmVzKSB7XHJcbiAgICAgIHZpZXcuY29udGFpbmVyRWwuYWRkQ2xhc3MoQ3NzQ2xhc3MuSXNNZFZpZXdIZWFkbGluZXNPbmx5KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzTWQpIHtcclxuICAgICAgdmlldy5jb250YWluZXJFbC5hZGRDbGFzcyhDc3NDbGFzcy5Jc01kVmlldyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdmlldy5jb250YWluZXJFbC5hZGRDbGFzcyhDc3NDbGFzcy5Jc05vbk1kVmlldyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBzaG91bGRSZXZlYWwgPSB0aGlzLnNob3VsZFJldmVhbExlYWYodmlldyk7XHJcbiAgICBpZiAoc2hvdWxkUmV2ZWFsKSB7XHJcbiAgICAgIHZpZXcuY29udGFpbmVyRWwuYWRkQ2xhc3MoQ3NzQ2xhc3MuUHJpdmFjeUdsYXNzZXNSZXZlYWwpO1xyXG4gICAgICB0aGlzLnJldmVhbGVkLnB1c2godmlldy5jb250YWluZXJFbCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdmlldy5jb250YWluZXJFbC5yZW1vdmVDbGFzcyhDc3NDbGFzcy5Qcml2YWN5R2xhc3Nlc1JldmVhbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVMZWF2ZXNBbmRHbG9iYWxSZXZlYWxzKCkge1xyXG4gICAgdGhpcy51cGRhdGVMZWF2ZXNTdHlsZSgpO1xyXG4gICAgdGhpcy51cGRhdGVHbG9iYWxSZXZlYWxTdHlsZSgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlTGVhdmVzU3R5bGUoKSB7XHJcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG4gICAgICB0aGlzLnVwZGF0ZUxlYWZWaWV3U3R5bGUobGVhZi52aWV3KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlR2xvYmFsUmV2ZWFsU3R5bGUoKSB7XHJcbiAgICB0aGlzLnJlbW92ZUFsbENsYXNzZXMoKTtcclxuICAgIHRoaXMuc2V0Q2xhc3NUb0RvY3VtZW50Qm9keSh0aGlzLmN1cnJlbnRMZXZlbCk7XHJcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5ob3ZlclRvUmV2ZWFsKSB7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChDc3NDbGFzcy5SZXZlYWxPbkhvdmVyKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnNldHRpbmdzLnJldmVhbFVuZGVyQ2FyZXQpIHtcclxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKENzc0NsYXNzLlJldmVhbFVuZGVyQ2FyZXQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQWxsQ2xhc3NlcygpIHtcclxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoQ3NzQ2xhc3MuQmx1ckFsbCwgQ3NzQ2xhc3MuUmV2ZWFsT25Ib3ZlciwgQ3NzQ2xhc3MuUmV2ZWFsQWxsLCBDc3NDbGFzcy5SZXZlYWxVbmRlckNhcmV0LCBDc3NDbGFzcy5SZXZlYWxIZWFkbGluZXMpO1xyXG4gIH1cclxuXHJcbiAgc2V0Q2xhc3NUb0RvY3VtZW50Qm9keShjdXJyZW50TGV2ZWw6IExldmVsKSB7XHJcbiAgICBzd2l0Y2ggKGN1cnJlbnRMZXZlbCkge1xyXG4gICAgICBjYXNlIExldmVsLkhpZGVBbGw6XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKENzc0NsYXNzLkJsdXJBbGwpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIExldmVsLlJldmVhbEFsbDpcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoQ3NzQ2xhc3MuUmV2ZWFsQWxsKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBMZXZlbC5SZXZlYWxIZWFkbGluZXM6XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKENzc0NsYXNzLlJldmVhbEhlYWRsaW5lcyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRCbHVyTGV2ZWxFbChkb2M6IERvY3VtZW50KSB7XHJcbiAgICB0aGlzLmJsdXJMZXZlbFN0eWxlRWwgPSBkb2MuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgdGhpcy5ibHVyTGV2ZWxTdHlsZUVsLmlkID0gXCJwcml2YWN5R2xhc3Nlc0JsdXJMZXZlbFwiO1xyXG4gICAgZG9jLmhlYWQuYXBwZW5kQ2hpbGQodGhpcy5ibHVyTGV2ZWxTdHlsZUVsKTtcclxuICAgIHRoaXMudXBkYXRlQmx1ckxldmVsRWwoKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUJsdXJMZXZlbEVsKCkge1xyXG4gICAgaWYgKCF0aGlzLmJsdXJMZXZlbFN0eWxlRWwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5ibHVyTGV2ZWxTdHlsZUVsLnRleHRDb250ZW50ID0gYGJvZHkgey0tYmx1ckxldmVsOiR7dGhpcy5zZXR0aW5ncy5ibHVyTGV2ZWx9ZW19O2A7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcml2YXRlRGlyc0VsKGRvYz86IERvY3VtZW50KSB7XHJcbiAgICBpZiAoZG9jICYmICF0aGlzLnByaXZhdGVEaXJzU3R5bGVFbCkge1xyXG4gICAgICB0aGlzLnByaXZhdGVEaXJzU3R5bGVFbCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgIHRoaXMucHJpdmF0ZURpcnNTdHlsZUVsLmlkID0gXCJwcml2YWN5R2xhc3Nlc0RpckJsdXJcIjtcclxuICAgICAgZG9jLmhlYWQuYXBwZW5kQ2hpbGQodGhpcy5wcml2YXRlRGlyc1N0eWxlRWwpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGlycyA9IHRoaXMuc2V0dGluZ3MucHJpdmF0ZURpcnMuc3BsaXQoXCIsXCIpO1xyXG4gICAgdGhpcy5wcml2YXRlRGlyc1N0eWxlRWwudGV4dENvbnRlbnQgPSBkaXJzXHJcbiAgICAgIC5tYXAoKGQpID0+IGBcclxuXHJcbiAgICAgICAgICA6aXMoLm5hdi1mb2xkZXItdGl0bGUsIC5uYXYtZmlsZS10aXRsZSlbZGF0YS1wYXRoXj0ke2R9XSB7ZmlsdGVyOiBibHVyKGNhbGModmFyKC0tYmx1ckxldmVsKSAqIDEpKX1cclxuXHJcbiAgICAgICAgICA6aXMoLm5hdi1mb2xkZXItdGl0bGUsIC5uYXYtZmlsZS10aXRsZSlbZGF0YS1wYXRoXj0ke2R9XTpob3ZlciB7ZmlsdGVyOiB1bnNldH1cclxuXHJcbiAgICAgICAgICAucHJpdmFjeS1nbGFzc2VzLXJldmVhbC1hbGwgOmlzKC5uYXYtZm9sZGVyLXRpdGxlLCAubmF2LWZpbGUtdGl0bGUpW2RhdGEtcGF0aF49JHtkfV0ge2ZpbHRlcjogdW5zZXR9XHJcblxyXG4gICAgICAgICAgYClcclxuICAgICAgLmpvaW4oXCJcIik7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuaW50ZXJmYWNlIFByaXZhY3lHbGFzc2VzU2V0dGluZ3Mge1xyXG4gIGJsdXJPblN0YXJ0dXA6IExldmVsO1xyXG4gIGJsdXJMZXZlbDogbnVtYmVyO1xyXG4gIGJsdXJPbklkbGVUaW1lb3V0U2Vjb25kczogbnVtYmVyO1xyXG4gIGhvdmVyVG9SZXZlYWw6IGJvb2xlYW47XHJcbiAgcmV2ZWFsVW5kZXJDYXJldDogYm9vbGVhbjtcclxuICBwcml2YXRlRGlyczogc3RyaW5nO1xyXG4gIHByaXZhdGVOb3RlTWFya2VyOiBzdHJpbmc7XHJcbn1cclxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUHJpdmFjeUdsYXNzZXNTZXR0aW5ncyA9IHtcclxuICBibHVyT25TdGFydHVwOiBMZXZlbC5IaWRlUHJpdmF0ZSxcclxuICBibHVyTGV2ZWw6IDAuMyxcclxuICBibHVyT25JZGxlVGltZW91dFNlY29uZHM6IC0xLFxyXG4gIGhvdmVyVG9SZXZlYWw6IHRydWUsXHJcbiAgcmV2ZWFsVW5kZXJDYXJldDogZmFsc2UsXHJcbiAgcHJpdmF0ZURpcnM6IFwiXCIsXHJcbiAgcHJpdmF0ZU5vdGVNYXJrZXI6IFwiI3ByaXZhdGVcIixcclxufTtcclxuXHJcbmNsYXNzIHByaXZhY3lHbGFzc2VzU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cclxuICBwbHVnaW46IFByaXZhY3lHbGFzc2VzUGx1Z2luO1xyXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFByaXZhY3lHbGFzc2VzUGx1Z2luKSB7XHJcbiAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICB9XHJcbiAgXHJcbiAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgIGxldCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG4gIFxyXG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHtcclxuICAgICAgdGV4dDogJ1ByaXZhY3kgR2xhc3NlcyB2JyArIHRoaXMucGx1Z2luLm1hbmlmZXN0LnZlcnNpb25cclxuICAgIH0pO1xyXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2EnLCB7XHJcbiAgICAgIHRleHQ6ICdodHRwczovL2dpdGh1Yi5jb20vamlsbGFsYmVydHMvcHJpdmFjeS1nbGFzc2VzJyxcclxuICAgICAgaHJlZjogXCJodHRwczovL2dpdGh1Yi5jb20vamlsbGFsYmVydHMvcHJpdmFjeS1nbGFzc2VzXCIsXHJcbiAgICB9KTtcclxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdzcGFuJywge1xyXG4gICAgICB0ZXh0OiAnOiBkb2N1bWVudGF0aW9uLCByZXBvcnQgaXNzdWVzLCBjb250YWN0IGluZm8nXHJcbiAgICB9KTtcclxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywge1xyXG4gICAgICB0ZXh0OiAnVG8gYWN0aXZhdGUvZGVhY3RpdmF0ZSBQcml2YWN5IEdsYXNzZXMsIGNsaWNrIHRoZSBnbGFzc2VzIGljb24gb24gdGhlIGxlZnQtaGFuZCByaWJib24gb3IgcnVuIHRoZSBcIlRvZ2dsZSBQcml2YWN5IEdsYXNzZXNcIiBjb21tYW5kIGluIHRoZSBDb21tYW5kIFBhbGV0dGUgKEN0cmwtUCkuIFRoZSBjb21tYW5kIGNhbiBhbHNvIGJlIGJvdW5kIHRvIGEga2V5Ym9hcmQgc2hvcnRjdXQgaWYgeW91IHdpc2guJ1xyXG4gICAgfSk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiQWN0aXZhdGUgUHJpdmFjeSBHbGFzc2VzIG9uIHN0YXJ0dXBcIilcclxuICAgICAgLnNldERlc2MoXCJJbmRpY2F0ZXMgd2hldGhlciB0aGUgcGx1Z2luIGlzIGF1dG9tYXRpY2FsbHkgYWN0aXZhdGVkIHdoZW4gc3RhcnRpbmcgT2JzaWRpYW4uXCIpXHJcbiAgICAgIC5hZGREcm9wZG93bigodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgdG9nZ2xlLmFkZE9wdGlvbnMoe1xyXG4gICAgICAgICAgXCJoaWRlLWFsbFwiOiBcIkhpZGUgYWxsXCIsXHJcbiAgICAgICAgICBcImhpZGUtcHJpdmF0ZVwiOiBcIkhpZGUgcHJpdmF0ZSAoZGVmYXVsdClcIixcclxuICAgICAgICAgIFwicmV2ZWFsLWFsbFwiOiBcIlJldmVhbCBhbGxcIixcclxuICAgICAgICAgIFwicmV2ZWFsLWhlYWRsaW5lc1wiOiBcIlJldmVhbCBoZWFkbGluZXMgb25seVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJsdXJPblN0YXJ0dXApO1xyXG4gICAgICAgIHRvZ2dsZS5vbkNoYW5nZSgodmFsdWUpID0+IGFzeW5jIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmx1ck9uU3RhcnR1cCA9IHZhbHVlO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgIHZhciBzbGlkZXJFbCA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKTtcclxuICAgIGxldCBzbGlkZXJFbERlc2MgPSAnSGlnaGVyIGlzIGJsdXJyaWVyLiBEZWZhdWx0PTYwLCBjdXJyZW50PSc7XHJcbiAgICBzbGlkZXJFbCBcclxuICAgICAgLnNldE5hbWUoJ0JsdXIgTGV2ZWwgKG9ubHkgYWZmZWN0cyBlbGVtZW50cyBmb3Igd2hpY2ggXCJCbHVycnkgVGV4dFwiIGlzIHNlbGVjdGVkIGJlbG93KScpXHJcbiAgICAgIC5zZXREZXNjKHNsaWRlckVsRGVzYyArIE1hdGgucm91bmQodGhpcy5wbHVnaW4uc2V0dGluZ3MuYmx1ckxldmVsKjEwMCkpIFxyXG4gICAgICAgICAgICAgICAgICAvLyBeIG5lZWQgcm91bmRpbmcgdG8gbm90IHNob3cgdmFsdWVzIGxpa2UgJzU1LjAwMDAwMDAwMDAwMDAxJ1xyXG4gICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAuc2V0TGltaXRzKDAuMSwgMS41LCAwLjA1KVxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ibHVyTGV2ZWwpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmx1ckxldmVsID0gdmFsdWU7XHJcbiAgICAgICAgICBzbGlkZXJFbC5zZXREZXNjKHNsaWRlckVsRGVzYyArIE1hdGgucm91bmQodGhpcy5wbHVnaW4uc2V0dGluZ3MuYmx1ckxldmVsKjEwMCkpO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5hY3RpdmVFZGl0b3IuZWRpdG9yLnJlZnJlc2goKTtcclxuICAgICAgICAgIC8vIGF3YWl0IHRoaXMucGx1Z2luLnJlZnJlc2godHJ1ZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ09iZnVzY2F0aW9uIG1ldGhvZCBmb3IgRWRpdCBNb2RlJylcclxuICAgICAgLnNldERlc2MoJ0hvdyB0byBvYmZ1c2NhdGUgdGhlIGRvY3VtZW50XFwncyB0ZXh0IGluIEVkaXQgTW9kZScpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB0ZXh0XHJcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiZmluYW5jZSx0aGVyYXB5XCIpXHJcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByaXZhdGVEaXJzKVxyXG4gICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IGFzeW5jIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJpdmF0ZURpcnMgPSB2YWx1ZTtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4udXBkYXRlTGVhdmVzQW5kR2xvYmFsUmV2ZWFscygpO1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4udXBkYXRlUHJpdmF0ZURpcnNFbCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICAgIC8vIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxyXG4gICAgICAvLyAgIC5hZGRPcHRpb24oJycsJ1tPZmZdJylcclxuICAgICAgLy8gICAuYWRkT3B0aW9uKCdibHVyRWRpdCcsJ0JsdXJyeSBUZXh0JylcclxuICAgICAgLy8gICAuYWRkT3B0aW9uKCdibG9ja0VkaXQnLCdTb2xpZCBCbG9ja3MnKVxyXG4gICAgICAvLyAgIC5hZGRPcHRpb24oJ2NpcmNsZXNFZGl0JywnQ2lyY2xlcyDimqDvuI8nKVxyXG4gICAgICAvLyAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lZGl0Qmx1ck1ldGhvZClcclxuICAgICAgLy8gLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAvLyAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVkaXRCbHVyTWV0aG9kID0gdmFsdWU7XHJcbiAgICAgIC8vICAgYXdhaXQgdGhpcy5wbHVnaW4ucmVmcmVzaCh0cnVlKTtcclxuICAgICAgLy8gfSkpO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnT2JmdXNjYXRpb24gbWV0aG9kIGZvciBQcmV2aWV3IE1vZGUnKVxyXG4gICAgICAuc2V0RGVzYygnSG93IHRvIG9iZnVzY2F0ZSB0aGUgZG9jdW1lbnRcXCdzIHRleHQgaW4gUHJldmlldyBNb2RlJylcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+IHRleHRcclxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCIjcHJpdmF0ZVwiKVxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcml2YXRlTm90ZU1hcmtlcilcclxuICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiBhc3luYyBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByaXZhdGVOb3RlTWFya2VyID0gdmFsdWU7XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnVwZGF0ZUxlYXZlc1N0eWxlKCk7XHJcbiAgICAgICAgfSkpO1xyXG5cclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IHByaXZhY3lHbGFzc2VzSWNvbiA9IGA8cGF0aCBzdHlsZT1cIiBzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOmN1cnJlbnRDb2xvcjtmaWxsLW9wYWNpdHk6MTtcIiBkPVwiTSAxOC4yNDIxODggNy42NjQwNjIgQyAxNS40Mjk2ODggNy44NDM3NSAxMi4wMTU2MjUgOC40MDYyNSA2LjkxNDA2MiA5LjUzMTI1IEMgNi4xNDA2MjUgOS43MDMxMjUgNC4zMjgxMjUgMTAuMDcwMzEyIDIuODkwNjI1IDEwLjM1OTM3NSBDIDEuNDUzMTI1IDEwLjY0ODQzOCAwLjIzNDM3NSAxMC44OTA2MjUgMC4xODc1IDEwLjkwNjI1IEMgMC4wNzAzMTI1IDEwLjkyOTY4OCAtMC4wMzkwNjI1IDEzLjU1NDY4OCAwLjAyMzQzNzUgMTQuNTcwMzEyIEMgMC4xMjUgMTYuMTMyODEyIDAuMzc1IDE2LjcwMzEyNSAxLjUgMTcuOTkyMTg4IEMgMy40MTQwNjIgMjAuMTg3NSAzLjcyNjU2MiAyMC43MTA5MzggNC4xNzE4NzUgMjIuNTM5MDYyIEMgNS4xNzE4NzUgMjYuNjA5Mzc1IDYuNzU3ODEyIDMxLjIyNjU2MiA4LjQyOTY4OCAzNC45MTQwNjIgQyA5LjQ2ODc1IDM3LjIxODc1IDEwLjg1OTM3NSAzOC42MjUgMTMuMzk4NDM4IDM5LjkyOTY4OCBDIDE3LjcyNjU2MiA0Mi4xNjQwNjIgMjMuMzgyODEyIDQyLjg5ODQzOCAyOS40NTMxMjUgNDIuMDMxMjUgQyAzMy4xNjQwNjIgNDEuNDkyMTg4IDM2LjE3OTY4OCAzOS45Mzc1IDM4Ljg2NzE4OCAzNy4xNzk2ODggQyA0MC43ODEyNSAzNS4yMTA5MzggNDIuMzA0Njg4IDMyLjk3NjU2MiA0My45NDUzMTIgMjkuNzI2NTYyIEMgNDQuNzgxMjUgMjguMDc4MTI1IDQ1LjAzMTI1IDI3LjQwNjI1IDQ1LjY2NDA2MiAyNS4wMzkwNjIgQyA0Ni4xNzk2ODggMjMuMTI1IDQ2LjQ0NTMxMiAyMi4zMzU5MzggNDYuOTIxODc1IDIxLjM2NzE4OCBDIDQ3LjU5Mzc1IDE5Ljk2ODc1IDQ4IDE5LjY3OTY4OCA0OS4zMzU5MzggMTkuNjI1IEMgNDkuNzY1NjI1IDE5LjYwOTM3NSA1MC41OTM3NSAxOS42MzI4MTIgNTEuMTcxODc1IDE5LjY3MTg3NSBDIDUyLjQyOTY4OCAxOS43NTc4MTIgNTIuNjY0MDYyIDE5Ljg1MTU2MiA1My4yODkwNjIgMjAuNTIzNDM4IEMgNTQuMTA5Mzc1IDIxLjQxNDA2MiA1NC42MjUgMjIuNDkyMTg4IDU1LjMwNDY4OCAyNC43NSBDIDU2Ljk4NDM3NSAzMC4zNDM3NSA1OS4wOTM3NSAzNC4yMTg3NSA2MS45NjA5MzggMzYuOTkyMTg4IEMgNjMuMzIwMzEyIDM4LjMwNDY4OCA2NC4zODI4MTIgMzkuMDYyNSA2Ni4wMDc4MTIgMzkuODc1IEMgNjkuMTc5Njg4IDQxLjQ2ODc1IDcyLjY3OTY4OCA0Mi4yNjU2MjUgNzYuNTIzNDM4IDQyLjI2NTYyNSBDIDgzLjYzMjgxMiA0Mi4yNjU2MjUgODkuNDg0Mzc1IDM5LjMyMDMxMiA5Mi40Njg3NSAzNC4yNDIxODggQyA5My41MzEyNSAzMi40NDUzMTIgOTQuMDkzNzUgMzAuODUxNTYyIDk1LjIzNDM3NSAyNi40MDYyNSBDIDk2LjU3MDMxMiAyMS4yMDMxMjUgOTYuOTA2MjUgMjAuMjAzMTI1IDk3LjczNDM3NSAxOC45ODQzNzUgQyA5OC4wODU5MzggMTguNDY4NzUgOTguNzE4NzUgMTcuODY3MTg4IDk5LjI3MzQzOCAxNy41MTU2MjUgQyA5OS45NjA5MzggMTcuMDc4MTI1IDk5Ljk2MDkzOCAxNy4wODU5MzggOTkuOTQ1MzEyIDE0LjIxODc1IEMgOTkuOTQ1MzEyIDEzLjU1NDY4OCA5OS45NDUzMTIgMTIuNzQyMTg4IDk5Ljk1MzEyNSAxMi40MjE4NzUgQyA5OS45Njg3NSAxMS4zNDM3NSA5OS42MDkzNzUgMTEuMDM5MDYyIDk3Ljk0NTMxMiAxMC43MzQzNzUgQyA5Ni42MDkzNzUgMTAuNDg0Mzc1IDk1LjY3OTY4OCAxMC4yNjU2MjUgOTMuNDc2NTYyIDkuNjU2MjUgQyA5MC45MjE4NzUgOC45NDUzMTIgOTAuNTE1NjI1IDguODUxNTYyIDg4LjM2NzE4OCA4LjUxNTYyNSBDIDgzLjAzMTI1IDcuNjcxODc1IDgxLjYyNSA3LjUzOTA2MiA3OC43NTc4MTIgNy42MDE1NjIgQyA3NC45NDUzMTIgNy42ODc1IDcyLjMwNDY4OCA4LjA2MjUgNjQuNDkyMTg4IDkuNjA5Mzc1IEMgNTkuMjE4NzUgMTAuNjU2MjUgNTcuMDMxMjUgMTEuMDIzNDM4IDU0LjUwNzgxMiAxMS4yODkwNjIgQyA1Mi41NzAzMTIgMTEuNDkyMTg4IDUwLjE3OTY4OCAxMS41NzAzMTIgNDguNDY4NzUgMTEuNDg0Mzc1IEMgNDUuNDA2MjUgMTEuMzM1OTM4IDQzLjkxNDA2MiAxMS4xMDkzNzUgMzkuMjU3ODEyIDEwLjA3ODEyNSBDIDM0Ljk2MDkzOCA5LjEyNSAzNC4wOTM3NSA4Ljk2MDkzOCAzMS4yMDMxMjUgOC41NTQ2ODggQyAyNS4wNjI1IDcuNzAzMTI1IDIxLjUyMzQzOCA3LjQ2MDkzOCAxOC4yNDIxODggNy42NjQwNjIgWiBNIDE4LjI0MjE4OCA3LjY2NDA2MiBcIi8+YFxyXG4vLyBodHRwczovL2ljb24tc2V0cy5pY29uaWZ5LmRlc2lnbi9waC9leWUtc2xhc2gvXHJcbmNvbnN0IGV5ZVNsYXNoSWNvbiA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pZFlNaWQgbWVldFwiIHZpZXdCb3g9XCIwIDAgMjU2IDI1NlwiPjxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTUzLjkgMzQuNmE4IDggMCAwIDAtMTEuOCAxMC44bDE5LjIgMjEuMUMyNSA4OC44IDkuNCAxMjMuMiA4LjcgMTI0LjhhOC4yIDguMiAwIDAgMCAwIDYuNWMuMy43IDguOCAxOS41IDI3LjYgMzguNGMyNS4xIDI1IDU2LjggMzguMyA5MS43IDM4LjNhMTI4LjYgMTI4LjYgMCAwIDAgNTIuMS0xMC44bDIyIDI0LjJhOCA4IDAgMCAwIDUuOSAyLjZhOC4yIDguMiAwIDAgMCA1LjQtMi4xYTcuOSA3LjkgMCAwIDAgLjUtMTEuM1ptNDcuMyA3NS45bDQxLjcgNDUuOEEzMS42IDMxLjYgMCAwIDEgMTI4IDE2MGEzMiAzMiAwIDAgMS0yNi44LTQ5LjVaTTEyOCAxOTJjLTMwLjggMC01Ny43LTExLjItNzkuOS0zMy4zQTEyOC4zIDEyOC4zIDAgMCAxIDI1IDEyOGM0LjctOC44IDE5LjgtMzMuNSA0Ny4zLTQ5LjRsMTggMTkuOGE0OCA0OCAwIDAgMCA2My42IDcwbDE0LjcgMTYuMkExMTIuMSAxMTIuMSAwIDAgMSAxMjggMTkyWm0xMTkuMy02MC43Yy0uNC45LTEwLjUgMjMuMy0zMy40IDQzLjhhOC4xIDguMSAwIDAgMS01LjMgMmE3LjYgNy42IDAgMCAxLTUuOS0yLjdhOCA4IDAgMCAxIC42LTExLjNBMTMxIDEzMSAwIDAgMCAyMzEgMTI4YTEzMC4zIDEzMC4zIDAgMCAwLTIzLjEtMzAuOEMxODUuNyA3NS4yIDE1OC44IDY0IDEyOCA2NGExMTIuOSAxMTIuOSAwIDAgMC0xOS40IDEuNmE4LjEgOC4xIDAgMCAxLTkuMi02LjZhOCA4IDAgMCAxIDYuNi05LjJhMTMyLjQgMTMyLjQgMCAwIDEgMjItMS44YzM0LjkgMCA2Ni42IDEzLjMgOTEuNyAzOC4zYzE4LjggMTguOSAyNy4zIDM3LjcgMjcuNiAzOC41YTguMiA4LjIgMCAwIDEgMCA2LjVaTTEzNCA5Ni42YTggOCAwIDAgMSAzLTE1LjhhNDguMyA0OC4zIDAgMCAxIDM4LjggNDIuN2E4IDggMCAwIDEtNy4yIDguN2gtLjhhNy45IDcuOSAwIDAgMS03LjktNy4yQTMyLjIgMzIuMiAwIDAgMCAxMzQgOTYuNlpcIi8+PC9zdmc+YDtcclxuLy8gaHR0cHM6Ly9pY29uLXNldHMuaWNvbmlmeS5kZXNpZ24vcGgvZXllLWNsb3NlZC1ib2xkL1xyXG5jb25zdCBleWVDbG9zZWRJY29uID0gYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWlkWU1pZCBtZWV0XCIgdmlld0JveD1cIjAgMCAyNTYgMjU2XCI+PHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNMjM0LjQgMTYwLjhhMTIgMTIgMCAwIDEtMTAuNCAxOGExMS44IDExLjggMCAwIDEtMTAuNC02bC0xNi4zLTI4LjJhMTI2IDEyNiAwIDAgMS0yOS40IDEzLjVsNS4yIDI5LjRhMTEuOSAxMS45IDAgMCAxLTkuNyAxMy45bC0yLjEuMmExMiAxMiAwIDAgMS0xMS44LTkuOWwtNS4xLTI4LjdhMTIzLjUgMTIzLjUgMCAwIDEtMTYuNCAxYTE0Ni4zIDE0Ni4zIDAgMCAxLTE2LjUtMWwtNS4xIDI4LjdhMTIgMTIgMCAwIDEtMTEuOCA5LjlsLTIuMS0uMmExMS45IDExLjkgMCAwIDEtOS43LTEzLjlsNS4yLTI5LjRhMTI1LjMgMTI1LjMgMCAwIDEtMjkuMy0xMy41TDQyLjMgMTczYTEyLjEgMTIuMSAwIDAgMS0xMC40IDZhMTEuNyAxMS43IDAgMCAxLTYtMS42YTEyIDEyIDAgMCAxLTQuNC0xNi40bDE3LjktMzFhMTQyLjQgMTQyLjQgMCAwIDEtMTYuNy0xNy42YTEyIDEyIDAgMSAxIDE4LjYtMTUuMUM1Ny4xIDExNi44IDg0LjkgMTQwIDEyOCAxNDBzNzAuOS0yMy4yIDg2LjctNDIuN2ExMiAxMiAwIDEgMSAxOC42IDE1LjFhMTUwLjMgMTUwLjMgMCAwIDEtMTYuNyAxNy43WlwiLz48L3N2Zz5gO1xyXG4vLyBodHRwczovL2ljb24tc2V0cy5pY29uaWZ5LmRlc2lnbi9waC9leWUvXHJcbmNvbnN0IGV5ZUljb24gPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaWRZTWlkIG1lZXRcIiB2aWV3Qm94PVwiMCAwIDI1NiAyNTZcIj48cGF0aCBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0yNDcuMyAxMjQuOGMtLjMtLjgtOC44LTE5LjYtMjcuNi0zOC41QzE5NC42IDYxLjMgMTYyLjkgNDggMTI4IDQ4UzYxLjQgNjEuMyAzNi4zIDg2LjNDMTcuNSAxMDUuMiA5IDEyNCA4LjcgMTI0LjhhNy45IDcuOSAwIDAgMCAwIDYuNGMuMy44IDguOCAxOS42IDI3LjYgMzguNWMyNS4xIDI1IDU2LjggMzguMyA5MS43IDM4LjNzNjYuNi0xMy4zIDkxLjctMzguM2MxOC44LTE4LjkgMjcuMy0zNy43IDI3LjYtMzguNWE3LjkgNy45IDAgMCAwIDAtNi40Wk0xMjggMTkyYy0zMC44IDAtNTcuNy0xMS4yLTc5LjktMzMuM0ExMzAuMyAxMzAuMyAwIDAgMSAyNSAxMjhhMTMwLjMgMTMwLjMgMCAwIDEgMjMuMS0zMC44QzcwLjMgNzUuMiA5Ny4yIDY0IDEyOCA2NHM1Ny43IDExLjIgNzkuOSAzMy4yQTEzMC4zIDEzMC4zIDAgMCAxIDIzMSAxMjhjLTcuMiAxMy41LTM4LjYgNjQtMTAzIDY0Wm0wLTExMmE0OCA0OCAwIDEgMCA0OCA0OGE0OCA0OCAwIDAgMC00OC00OFptMCA4MGEzMiAzMiAwIDEgMSAzMi0zMmEzMi4xIDMyLjEgMCAwIDEtMzIgMzJaXCIvPjwvc3ZnPmA7XHJcbi8vIGh0dHBzOi8vaWNvbi1zZXRzLmljb25pZnkuZGVzaWduL3BoL2V5ZWdsYXNzZXMvXHJcbmNvbnN0IGV5ZUdsYXNzZXMgPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaWRZTWlkIG1lZXRcIiB2aWV3Qm94PVwiMCAwIDI1NiAyNTZcIj48cGF0aCBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0yMDAgNDBhOCA4IDAgMCAwIDAgMTZhMTYgMTYgMCAwIDEgMTYgMTZ2NTguMDhBNDQgNDQgMCAwIDAgMTQ1LjY4IDE1MmgtMzUuMzZBNDQgNDQgMCAwIDAgNDAgMTMwLjA4VjcyYTE2IDE2IDAgMCAxIDE2LTE2YTggOCAwIDAgMCAwLTE2YTMyIDMyIDAgMCAwLTMyIDMydjkyYTQ0IDQ0IDAgMCAwIDg3LjgxIDRoMzIuMzhhNDQgNDQgMCAwIDAgODcuODEtNFY3MmEzMiAzMiAwIDAgMC0zMi0zMlpNNjggMTkyYTI4IDI4IDAgMSAxIDI4LTI4YTI4IDI4IDAgMCAxLTI4IDI4Wm0xMjAgMGEyOCAyOCAwIDEgMSAyOC0yOGEyOCAyOCAwIDAgMS0yOCAyOFpcIi8+PC9zdmc+YDtcclxuXHJcbmZ1bmN0aW9uIGlzTWFya2Rvd25GaWxlSW5mb1ZpZXcoeDogVmlldykge1xyXG4gIGNvbnN0IGFueVggPSB4O1xyXG4gIHJldHVybiAhIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYW55WCwgXCJmaWxlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0hvb2tlZCh2aWV3OiBWaWV3KSB7XHJcbiAgY29uc3QgYW55VmlldyA9IHZpZXc7XHJcbiAgY29uc3Qgb3duUHJvcHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhbnlWaWV3KTtcclxuICByZXR1cm4gKG93blByb3BzLmNvbnRhaW5zKFwic2V0U3RhdGVcIikgJiYgdHlwZW9mIGFueVZpZXcuc2V0U3RhdGUgPT09IFwiZnVuY3Rpb25cIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhvb2tWaWV3U3RhdGVDaGFuZ2VkKFxyXG4gIHZpZXc6IFdvcmtzcGFjZUxlYWZbXCJ2aWV3XCJdLFxyXG4gIG9uQmVmb3JlU3RhdGVDaGFuZ2U6IChsOiBWaWV3KSA9PiB2b2lkLFxyXG4gIG9uQWZ0ZXJTdGF0ZUNoYW5nZTogKGw6IFZpZXcpID0+IHZvaWRcclxuKSB7XHJcbiAgY29uc3QgYW55VmlldyA9IHZpZXc7XHJcbiAgY29uc3Qgc2V0U3RhdGUgPSBhbnlWaWV3Py5zZXRTdGF0ZTtcclxuXHJcbiAgZnVuY3Rpb24gd3JhcHBlcigpIHtcclxuICAgIG9uQmVmb3JlU3RhdGVDaGFuZ2Uodmlldyk7XHJcbiAgICBjb25zdCByID0gc2V0U3RhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIGlmICh0eXBlb2Ygci50aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgci50aGVuKCgpID0+IHtcclxuICAgICAgICBvbkFmdGVyU3RhdGVDaGFuZ2Uodmlldyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIG9uQWZ0ZXJTdGF0ZUNoYW5nZSh2aWV3KTtcclxuICAgIH1cclxuICAgIHJldHVybiByO1xyXG4gIH1cclxuICBhbnlWaWV3LnNldFN0YXRlID0gd3JhcHBlci5iaW5kKHZpZXcpO1xyXG4gIHJldHVybiBhbnlWaWV3O1xyXG59Il0sIm5hbWVzIjpbIlBsdWdpbiIsImFkZEljb24iLCJQbHVnaW5TZXR0aW5nVGFiIiwiU2V0dGluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW9HQTtBQUNPLFNBQVMsU0FBUyxDQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRTtBQUM3RCxJQUFJLFNBQVMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLE9BQU8sS0FBSyxZQUFZLENBQUMsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsVUFBVSxPQUFPLEVBQUUsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtBQUNoSCxJQUFJLE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLE9BQU8sQ0FBQyxFQUFFLFVBQVUsT0FBTyxFQUFFLE1BQU0sRUFBRTtBQUMvRCxRQUFRLFNBQVMsU0FBUyxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMs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
